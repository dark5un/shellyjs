<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
<title>Lobby</title>
    <link rel="stylesheet" href="/common/jquery-ui-1.10.2/css/smoothness/jquery-ui.css" />
    <script src="/common/jquery-1.9.1.js"></script>
    <script src="/common/jquery-ui-1.10.2/js/jquery-ui.js"></script>
    <script src="/common/jquery.cookie.js"></script>
    <script src="/static/js/ba-debug.js"></script>
    <script src="/static/js/reconnecting-websocket.js"></script>
    <script src="/static/js/fastclick.js"></script>
    <script src="/static/js/common.js"></script>

    <link rel="stylesheet" type="text/css" href="/static/css/shadmin.css">
    <link rel="stylesheet" type="text/css" href="/static/css/shgame.css">

    <script language="javascript">
var Env = {{{EnvJson}}};


function addGame(gameName, gameInfo) {
    console.log(gameName);
    var $newGame= $("#gameTemplate").clone();
    $newGame.find("#gameName").text(gameName);
    $newGame.find("#gamePlayBtn").attr("gn", gameName);

    $newGame.find("#gamePlayBtn").click(function () {
        var gameName =$(this).attr("gn");
        var url = "/lobby.html?gn=" + gameName;
        window.location.href = url;
    });

    $newGame.css("display", "block");
    $("#gameList").append($newGame);
}

function showGames() {
    for (var gameName in Env.games) {
        addGame(gameName, Env.games[gameName]);
    }
}

$(init);
function init() {
    $("#shSystem").text("Example");
    $("#shSubTitle").text("Home");

    showGames();

    commInit();

    window.addEventListener("load", function () {
        new FastClick(document.body);
    }, false);
}
</script>
    <style>
    </style>
</head>
<body>
{{> header}}
{{> gameNav}}
{{> errorBox}}

<div id="gameList">
    <div id="gameTemplate" class="gameBoxDiv" style="display: none; float:left;">
        <div id="gameName" class="gameBoxHeaderDiv">Game 1</div>
        <div class="gameBoxInnerDiv">
            Nice game to play
            <button id="gamePlayBtn">play</button>
        </div>
    </div>
</div>

<div style="clear:both"></div>
<div class="commLogDiv gameBoxDiv">
    <div class="gameBoxHeaderDiv">Comm Log<button id="showHideLog" style="float:right;">+</button></div>
    <div id="commLog" class="gameBoxInnerDiv" readonly></div>
</div>

{{> footer}}
</body>
</html>